[tox]
minversion = 4.0
envlist = lint, py314, py314-analytics
skip_missing_interpreters = true

[testenv]
basepython = python3.14
package = editable
extras = dev
setenv =
    INTERMINE314_RUN_LIVE_TESTS = 0
commands =
    python -m pytest -q {posargs:tests}

[testenv:lint]
skip_install = true
deps =
    ruff
commands =
    ruff check .

[testenv:py314-dataframe]
description = Backward-compatible alias for analytics smoke check
commands =
    {[testenv:py314-analytics]commands}

[testenv:py314-analytics]
description = Unit tests + core Polars/DuckDB/Parquet analytics smoke check
commands =
    {[testenv]commands}
    python setup.py analyticscheck

[testenv:live]
setenv =
    INTERMINE314_RUN_LIVE_TESTS = 1
passenv =
    TESTMODEL_URL
commands =
    {[testenv]commands}
